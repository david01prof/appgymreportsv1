<div class="flex justify-content-end">
  <p-button icon="pi pi-plus" [routerLink]="['routine']" />
</div>

@if (routines && routines.length > 0) {

<!-- Table -->

<div class="mb-3">
  <p-button 
      type="button" 
      icon="pi pi-chevron-left" 
      (onClick)="prev()" 
      [disabled]="isFirstPage()" 
      styleClass="p-button-text" />
  <p-button 
      type="button"
      icon="pi pi-refresh" 
      (onClick)="reset()" 
      styleClass="p-button-text" />
  <p-button 
      type="button" 
      icon="pi pi-chevron-right" 
      (onClick)="next()" 
      [disabled]="isLastPage()" 
      styleClass="p-button-text" />
</div>

<div class="card">
  <p-table
    [value]="routines"
    [tableStyle]="{ 'min-width': '60rem' }"
    [paginator]="true"
    [rows]="rows"
    [rowsPerPageOptions]="[5, 10, 20]"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [first]="first"
    [showCurrentPageReport]="true"
    (onPage)="pageChange($event)"
  >
    <ng-template pTemplate="body" let-routine>
      <tr>
        <td>
          <p-card [style]="{ margin: '15px 0' }">
            <div class="flex align-items-center">
              <i class="pi pi-heart text-6xl text-blue-500"></i>
              <div class="ml-3">
                <span class="text-blue-500 block white-space-nowrap text-2xl">{{
                  routine.titleExercise
                }}</span
                ><span class="text-blue-500 block font-bold text-sm">{{
                  routine.date
                }}</span>
              </div>
            </div>

            <div class="flex justify-content-end gap-2">
              @if (routine.status == 'EnProceso') {
              <p-tag severity="success" value="En proceso" />
              } @else if (routine.status == 'Pendiente') {
              <p-tag severity="warning" value="Pendiente" />
              } @else {
              <p-tag severity="danger" value="Finalizada" />
              }
            </div>

            <div class="flex justify-content-end">
              <p-button
                icon="pi pi-plus"
                (onClick)="deleteRoutine(routine.id)"
              />
            </div>
          </p-card>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
} @else {
<h3 class="text-center">Por el momento no hay rutinas creadas</h3>
<h4 class="text-center">Quieres crear una nueva rutina ?</h4>
<h4 [routerLink]="['/newRoutine']" class="text-center text-blue-200">
  Crear nueva rutina
</h4>
}
