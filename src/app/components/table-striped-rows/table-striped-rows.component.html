<div class="card">
    <p-table 
        #dt2
        [value]="products()" 
        styleClass="p-datatable-striped" 
        [tableStyle]="{'min-width': '50rem'}"
        [paginator]="true"
        [dataKey]="getKey()"
        [rows]="5"
        [globalFilterFields]="getFilterFields()"
        [rowsPerPageOptions]="[5, 10]">
        <ng-template pTemplate="caption">
            <div class="flex">
                <p-button label="Clear" [outlined]="true" icon="pi pi-filter-slash" (onClick)="clear(dt2)" />
                <span class="p-input-icon-left ml-auto">
                    <i class="pi pi-search"></i>
                    <input 
                    pInputText 
                    type="text" 
                    [(ngModel)]="searchValue"
                    (input)="onGlobalFilter($event)" 
                    placeholder="Buscar...." />
                </span>
            </div>
        </ng-template>
        <!-- <ng-template pTemplate="caption">
            <div class="flex">
                <p-iconField iconPosition="left" class="ml-auto">
                    <p-inputIcon>
                        <i class="pi pi-search"></i>
                    </p-inputIcon>
                    <input 
                        pInputText 
                        type="text" 
                        (input)="onGlobalFilter($event)" 
                        placeholder="Search keyword" />
                </p-iconField>
            </div>
        </ng-template> -->
            <ng-template pTemplate="header">
                <tr>
                    <th *ngFor="let column of columns()" [pSortableColumn]="column.id"> {{column.label}} <p-sortIcon [field]="column.id" /> </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-product>
                <tr>
                    <td *ngFor="let column of columns()"> 
                        
                        @if (column.id == 'actions') {
                            <p-button icon="pi pi-eye" severity="info" ></p-button>
                        }
                        @else if (column.id == 'tag') {
                            <p-tag [severity]="product['severityTag'].code">{{product['tag']}}</p-tag>
                        }
                        @else if (column.id == 'exercises') {
                            {{product[column.id].length}}
                        }
                        @else if (column.id == 'created') {
                            {{getDate(product[column.id]) | date: 'dd/MM/yyyy'}}
                        }
                        @else if (column.id == 'date') {
                            {{getDate(_routineSvc.convertTimeStamptoDate(product[column.id])) | date: 'dd/MM/yyyy'}}
                        }
                        @else if (column.id == 'totaligc') {
                            @if(product["calculator"].totaligc != ''){
                                {{product["calculator"].totaligc}}%
                            }@else {
                                0%
                            }
                        }
                        @else {
                            {{product[column.id]}} 
                        }
                        

                    </td>
                </tr>
            </ng-template>
    </p-table>
</div>
